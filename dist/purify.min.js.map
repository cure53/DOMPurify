{"version":3,"file":"./dist/purify.min.js","sources":["./src/purify.js"],"names":["factory","root","window","define","amd","module","exports","DOMPurify","version","document","nodeType","isSupported","originalDocument","DocumentFragment","HTMLTemplateElement","NodeFilter","NamedNodeMap","MozNamedAttrMap","Text","Comment","DOMParser","createElement","content","ownerDocument","implementation","createNodeIterator","getElementsByTagName","createDocumentFragment","importNode","hooks","createHTMLDocument","documentMode","_addToSet","set","array","l","length","_cloneObj","object","newObject","property","hasOwnProperty","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","FORBID_TAGS","FORBID_ATTR","ALLOW_DATA_ATTR","SAFE_FOR_JQUERY","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_DOM_IMPORT","SANITIZE_DOM","KEEP_CONTENT","FORBID_CONTENTS","CONFIG","formElement","_parseConfig","cfg","ADD_TAGS","ADD_ATTR","Object","freeze","_forceRemove","node","parentNode","removeChild","e","outerHTML","_initDocument","dirty","doc","body","parseFromString","firstElementChild","call","_createIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","FILTER_ACCEPT","_isClobbered","elm","nodeName","textContent","attributes","removeAttribute","setAttribute","_sanitizeElements","currentNode","_executeHook","tagName","toLowerCase","insertAdjacentHTML","innerHTML","replace","MUSTACHE_EXPR","ERB_EXPR","_sanitizeAttributes","hookEvent","attrName","attrValue","keepAttr","attr","name","value","lcName","idAttr","id","Array","prototype","slice","apply","indexOf","DATA_ATTR","test","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","_sanitizeShadowDOM","fragment","shadowNode","shadowIterator","nextNode","entryPoint","data","forEach","hook","sanitize","toStaticHTML","oldNode","nodeIterator","returnNode","firstChild","appendChild","addHook","hookFunction","push","removeHook","pop","removeHooks","removeAllHooks"],"mappings":"CAAE,SAASA,GACP,YAEA,IAAIC,SAAcC,UAAW,YAAc,KAAOA,MAElD,UAAWC,UAAW,YAAcA,OAAOC,IAAK,CAC5CD,OAAO,WAAY,MAAOH,GAAQC,SAC/B,UAAWI,UAAW,YAAa,CACtCA,OAAOC,QAAUN,EAAQC,OACtB,CACHA,EAAKM,UAAYP,EAAQC,MAE/B,QAASD,GAAQE,GACf,YAEA,IAAIK,GAAY,SAASL,GACrB,MAAOF,GAAQE,GAOnBK,GAAUC,QAAU,OAEpB,KAAKN,IAAWA,EAAOO,UAAYP,EAAOO,SAASC,WAAa,EAAG,CAG/DH,EAAUI,YAAc,KACxB,OAAOJ,GAGX,GAAIE,GAAWP,EAAOO,QACtB,IAAIG,GAAmBH,CACvB,IAAII,GAAmBX,EAAOW,gBAC9B,IAAIC,GAAsBZ,EAAOY,mBACjC,IAAIC,GAAab,EAAOa,UACxB,IAAIC,GAAed,EAAOc,cAAgBd,EAAOe,eACjD,IAAIC,GAAOhB,EAAOgB,IAClB,IAAIC,GAAUjB,EAAOiB,OACrB,IAAIC,GAAYlB,EAAOkB,SAQvB,UAAWN,KAAwB,WAAY,CAC3CL,EAAWA,EAASY,cAAc,YAAYC,QAAQC,cAE1D,GAAIC,GAAiBf,EAASe,cAC9B,IAAIC,GAAqBhB,EAASgB,kBAClC,IAAIC,GAAuBjB,EAASiB,oBACpC,IAAIC,GAAyBlB,EAASkB,sBACtC,IAAIC,GAAahB,EAAiBgB,UAElC,IAAIC,KAKJtB,GAAUI,kBACCa,GAAeM,qBAAuB,aAC7CrB,EAASsB,eAAiB,CAG9B,IAAIC,GAAY,SAASC,EAAKC,GAC1B,GAAIC,GAAID,EAAME,MACd,OAAOD,IAAK,CACRF,EAAIC,EAAMC,IAAM,KAEpB,MAAOF,GAIX,IAAII,GAAY,SAASC,GACrB,GAAIC,KACJ,IAAIC,EACJ,KAAKA,IAAYF,GAAQ,CACrB,GAAIA,EAAOG,eAAeD,GAAW,CACjCD,EAAUC,GAAYF,EAAOE,IAGrC,MAAOD,GASX,IAAIG,GAAe,IACnB,IAAIC,GAAuBX,MAGvB,IAAI,OAAO,UAAU,UAAU,OAAO,UAAU,QAAQ,QAAQ,IAChE,MAAM,MAAM,MAAM,QAAQ,aAAa,OAAO,KAAK,SAAS,SAC5D,UAAU,SAAS,OAAO,OAAO,MAAM,WAAW,UAAU,OAC5D,WAAW,KAAK,YAAY,MAAM,UAAU,MAAM,MAAM,MAAM,KAAK,KACnE,UAAU,KAAK,WAAW,aAAa,SAAS,OAAO,SAAS,OAChE,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,OAAO,SAAS,SAAS,KAAK,OAAO,IACnE,MAAM,QAAQ,MAAM,MAAM,QAAQ,SAAS,KAAK,OAAO,MAAM,OAC7D,UAAU,OAAO,WAAW,QAAQ,MAAM,OAAO,KAAK,WACtD,SAAS,SAAS,IAAI,MAAM,WAAW,IAAI,KAAK,KAAK,OAAO,IAAI,OAChE,UAAU,SAAS,SAAS,QAAQ,SAAS,SAAS,OAAO,SAC7D,SAAS,QAAQ,MAAM,UAAU,MAAM,QAAQ,QAAQ,KAAK,WAC5D,WAAW,QAAQ,KAAK,QAAQ,OAAO,KAAK,QAAQ,KAAK,IAAI,KAAK,MAClE,QAAQ,MAGR,MAAM,WAAW,cAAc,eAAe,eAC9C,gBAAgB,mBAAmB,SAAS,WAAW,OAAO,OAC9D,UAAU,OAAO,IAAI,QAAQ,WAAW,QAAQ,QAAQ,OACxD,iBAAiB,SAAS,OAAO,WAAW,QAAQ,OAAO,UAC3D,UAAU,WAAW,iBAAiB,OAAO,OAAO,SAAS,SAC7D,OAAO,WAAW,QAAQ,OAAO,QAAQ,OAAO,QAGhD,OAAO,WAAW,SAAS,UAAU,QAAQ,SAAS,KAAK,aAC3D,eAAe,KAAK,KAAK,QAAQ,UAAU,WAAW,QAAQ,OAC9D,KAAK,UAAU,QAAQ,UAAU,OAAO,OAAO,UAAU,SAAS,MAClE,QAAQ,MAAM,SAAS,aAGvB,SAIJ,IAAIY,GAAe,IACnB,IAAIC,GAAuBb,MAGvB,SAAS,SAAS,QAAQ,MAAM,eAAe,aAAa,UAC5D,SAAS,cAAc,cAAc,UAAU,OAAO,QAAQ,QAAQ,QACtE,OAAO,UAAU,SAAS,WAAW,UAAU,MAAM,WACrD,WAAW,UAAU,OAAO,MAAM,UAAU,SAAS,SAAS,OAAO,OACrE,WAAW,KAAK,QAAQ,QAAQ,OAAO,OAAO,OAAQ,MAAM,MAC5D,YAAY,QAAQ,SAAS,MAAM,WAAW,OAAO,UAAU,aAC/D,SAAS,OAAO,UAAU,UAAU,cAAc,SAAS,UAAU,UACrE,aAAa,WAAW,MAAM,WAAW,MAAM,WAAW,OAC1D,UAAU,aAAa,QAAQ,WAAW,QAAQ,OAAO,OACzD,UAAU,QAAQ,MAAM,OAAO,QAAQ,UAAU,WAAW,QAC5D,OAAO,SAAS,SAAS,QAAQ,QAAQ,QAGzC,gBAAgB,aAAa,aAAa,qBAC1C,SAAS,UAAU,iBAAiB,OAAO,OAAO,YAClD,YAAY,QAAQ,sBAAsB,8BAC1C,gBAAgB,kBAAkB,KAAK,KAAK,IAAI,KAAK,KAAK,YAC1D,UAAU,UAAU,MAAM,YAAY,MAAM,OAAO,eACnD,YAAY,SAAS,cAAc,gBAAgB,cACnD,YAAY,mBAAmB,eAAe,aAAa,eAC3D,cAAc,kBAAkB,KAAK,MAAM,KAAK,KAAK,KAAK,KAAK,UAC/D,iBAAiB,iBAAiB,QAAQ,aAAa,aACvD,eAAe,MAAM,OAAO,OAAO,MAAM,SAAS,WAAW,UAC7D,QAAQ,WAAW,cAAc,OAAO,SAAS,IAAI,KAAK,KAAK,SAC/D,UAAU,QAAQ,OAAO,kBAAkB,aAAa,eACxD,mBAAmB,oBAAoB,iBAAiB,kBACxD,oBAAoB,iBAAiB,SAAS,eAAe,YAC7D,cAAc,kBAAkB,iBAAiB,KAAK,KAAK,UAC3D,aAAa,eAAe,OAAO,eAAe,IAAI,KAAK,KAAK,IAChE,KAAK,KAAK,IAGV,SAAS,cAAc,WAAW,QAAQ,eAAe,cACzD,aAAa,aAAa,QAAQ,UAAU,eAAe,QAC3D,QAAQ,UAAU,SAAS,gBAAgB,SAAS,SACpD,iBAAiB,YAAY,WAAW,cAAc,UACtD,UAAU,gBAAgB,WAAW,WAAW,OAAO,WACvD,WAAW,aAAa,UAAU,SAAS,SAAS,cACpD,gBAAgB,uBAAuB,YAAY,YACnD,aAAa,WAAW,iBAAiB,iBAAiB,YAC1D,UAGA,aAAa,SAAS,cAAc,YAAY,eAIpD,IAAIc,GAAc,IAGlB,IAAIC,GAAc,IAGlB,IAAIC,GAAkB,IAGtB,IAAIC,GAAkB,KAKtB,IAAIC,GAAqB,KAGzB,IAAIC,GAAiB,KAKrB,IAAIC,GAAa,KAGjB,IAAIC,GAAsB,KAM1B,IAAIC,GAAoB,KAGxB,IAAIC,GAAe,IAGnB,IAAIC,GAAe,IAGnB,IAAIC,GAAkBzB,MAClB,QAAS,OAAQ,OAAQ,SAAU,QAAS,MAAO,SAIvD,IAAI0B,GAAS,IAKb,IAAIC,GAAclD,EAASY,cAAc,OAOzC,IAAIuC,GAAe,SAASC,GAExB,SAAWA,KAAQ,SAAU,CACzBA,KAIJnB,EAAe,gBAAkBmB,GAC7B7B,KAAc6B,EAAInB,cAAgBC,CACtCC,GAAe,gBAAkBiB,GAC7B7B,KAAc6B,EAAIjB,cAAgBC,CACtCC,GAAc,eAAiBe,GAC3B7B,KAAc6B,EAAIf,eACtBC,GAAc,eAAiBc,GAC3B7B,KAAc6B,EAAId,eACtBC,GAAsBa,EAAIb,kBAAwB,KAClDC,GAAsBY,EAAIZ,iBAAwB,KAClDC,GAAsBW,EAAIX,oBAAwB,KAClDC,GAAsBU,EAAIV,gBAAwB,KAClDC,GAAsBS,EAAIT,YAAwB,KAClDC,GAAsBQ,EAAIR,qBAAwB,KAClDC,GAAsBO,EAAIP,mBAAwB,KAClDC,GAAsBM,EAAIN,eAAwB,KAClDC,GAAsBK,EAAIL,eAAwB,KAElD,IAAIH,EAAqB,CACrBD,EAAa,KAIjB,GAAIS,EAAIC,SAAU,CACd,GAAIpB,IAAiBC,EAAsB,CACvCD,EAAeL,EAAUK,GAE7BV,EAAUU,EAAcmB,EAAIC,UAEhC,GAAID,EAAIE,SAAU,CACd,GAAInB,IAAiBC,EAAsB,CACvCD,EAAeP,EAAUO,GAE7BZ,EAAUY,EAAciB,EAAIE,UAIhC,GAAIP,EAAc,CAAEd,EAAa,SAAW,KAI5C,GAAIsB,QAAU,UAAYA,QAAQ,CAAEA,OAAOC,OAAOJ,GAElDH,EAASG,EAQb,IAAIK,GAAe,SAASC,GACxB,IACIA,EAAKC,WAAWC,YAAYF,GAC9B,MAAOG,GACLH,EAAKI,UAAY,IAUzB,IAAIC,GAAgB,SAASC,GAEzB,GAAIC,GAAKC,CACT,KACID,GAAM,GAAItD,IAAYwD,gBAAgBH,EAAO,aAC/C,MAAOH,IAIT,IAAKI,EAAI,CACLA,EAAMlD,EAAeM,mBAAmB,GACxC6C,GAAOD,EAAIC,IACXA,GAAKP,WAAWC,YAAYM,EAAKP,WAAWS,kBAC5CF,GAAKJ,UAAYE,EAIrB,SAAWC,GAAIhD,uBAAyB,WAAW,CAC/C,MAAOgD,GAAIhD,qBACPyB,EAAiB,OAAS,QAAQ,OACnC,CACH,MAAOzB,GAAqBoD,KAAKJ,EAC7BvB,EAAiB,OAAS,QAAQ,IAU9C,IAAI4B,GAAkB,SAAS9E,GAC3B,MAAOwB,GAAmBqD,KAAK7E,EAAKsB,eAAiBtB,EACjDA,EACAc,EAAWiE,aACTjE,EAAWkE,aACXlE,EAAWmE,UACb,WAAa,MAAOnE,GAAWoE,eAC/B,OAUR,IAAIC,GAAe,SAASC,GACxB,GAAIA,YAAenE,IAAQmE,YAAelE,GAAS,CAC/C,MAAO,OAEX,SAAakE,GAAIC,WAAa,gBACjBD,GAAIE,cAAgB,gBACpBF,GAAIhB,cAAgB,cACzBgB,EAAIG,qBAAsBxE,WACrBqE,GAAII,kBAAoB,kBACxBJ,GAAIK,eAAiB,WAChC,CACE,MAAO,MAEX,MAAO,OAaX,IAAIC,GAAoB,SAASC,GAE7BC,EAAa,yBAA0BD,EAAa,KAGpD,IAAIR,EAAaQ,GAAc,CAC3B1B,EAAa0B,EACb,OAAO,MAIX,GAAIE,GAAUF,EAAYN,SAASS,aAGnCF,GAAa,sBAAuBD,GAChCE,QAASA,GAIb,KAAKpD,EAAaoD,IAAYhD,EAAYgD,GAAU,CAEhD,GAAItC,IAAiBC,EAAgBqC,UACnBF,GAAYI,qBAAuB,WAAY,CAC7D,IACIJ,EAAYI,mBAAmB,WAAYJ,EAAYK,WACzD,MAAO3B,KAEbJ,EAAa0B,EACb,OAAO,MAIX,GAAI3C,IAAoB2C,EAAYf,kBAAmB,CACnDe,EAAYK,UAAYL,EAAYL,YAAYW,QAAQ,KAAM,QAIlE,GAAGN,EAAYlF,WAAa,GAAKwC,EAAoB,CAEjD,GAAI5B,GAAUsE,EAAYL,WAC1BjE,GAAUA,EAAQ4E,QAAQC,EAAe,IACzC7E,GAAUA,EAAQ4E,QAAQE,EAAU,IACpCR,GAAYL,YAAcjE,EAI9BuE,EAAa,wBAAyBD,EAAa,KAEnD,OAAO,OAcX,IAAIS,GAAsB,SAAST,GAE/BC,EAAa,2BAA4BD,EAAa,KAEtD,IAAIJ,GAAaI,EAAYJ,UAG7B,KAAKA,EAAY,CAAE,OAEnB,GAAIc,IACAC,SAAU,GACVC,UAAW,GACXC,SAAU,KAEd,IAAItE,GAAIqD,EAAWpD,MACnB,IAAIsE,GAAMC,EAAMC,EAAOC,EAAQC,CAG/B,OAAO3E,IAAK,CACRuE,EAAOlB,EAAWrD,EAClBwE,GAAOD,EAAKC,IACZC,GAAQF,EAAKE,KACbC,GAASF,EAAKZ,aAGdO,GAAUC,SAAWM,CACrBP,GAAUE,UAAYI,CACtBN,GAAUG,SAAW,IACrBZ,GAAa,wBAAyBD,EAAaU,EACnDM,GAAQN,EAAUE,SAMlB,IAAIK,IAAW,QACPjB,EAAYN,WAAa,OAASE,EAAWuB,GAAI,CACrDD,EAAStB,EAAWuB,EACpBvB,GAAawB,MAAMC,UAAUC,MAAMC,MAAM3B,EACzCI,GAAYH,gBAAgB,KAC5BG,GAAYH,gBAAgBkB,EAC5B,IAAInB,EAAW4B,QAAQN,GAAU3E,EAAG,CAChCyD,EAAYF,aAAa,KAAMoB,EAAOF,YAEvC,CACHhB,EAAYH,gBAAgBkB,GAIhC,IAAKL,EAAUG,SAAU,CACrB,SAIJ,GAAIlD,IACKsD,IAAW,MAAQA,IAAW,UAC9BD,IAAS1G,IAAU0G,IAASnG,IAAYmG,IAASjD,IAAc,CACpE,SAGJ,IAGMf,EAAaiE,KAAY9D,EAAY8D,KAIpC3D,GAAsBF,GAAmBqE,EAAUC,KAAKT,OAIzDU,EAAkBD,KAAKV,EAAMV,QAAQsB,EAAgB,MAErDX,IAAW,OAASD,EAAMQ,QAAQ,WAAa,GAC/CxB,EAAYN,WAAa,OAE7B,CAEE,IAGI,GAAIpC,EAAoB,CACpB0D,EAAQA,EAAMV,QAAQC,EAAe,IACrCS,GAAQA,EAAMV,QAAQE,EAAU,IAChCR,GAAYF,aAAaiB,EAAMC,GAEnChB,EAAYF,aAAaiB,EAAMC,GACjC,MAAOtC,MAOjBuB,EAAa,0BAA2BD,EAAa,MAEzD,IAAIyB,GAAY,2BAChB,IAAIE,GAAoB,uBAExB,IAAIC,GAAkB,uDAEtB,IAAIrB,GAAgB,iBACpB,IAAIC,GAAW,aAQf,IAAIqB,GAAqB,SAASC,GAC9B,GAAIC,EACJ,IAAIC,GAAiB7C,EAAgB2C,EAGrC7B,GAAa,0BAA2B6B,EAAU,KAElD,OAASC,EAAaC,EAAeC,WAAc,CAE/ChC,EAAa,yBAA0B8B,EAAY,KAGnD,IAAIhC,EAAkBgC,GAAa,CAC/B,SAIJ,GAAIA,EAAWrG,kBAAmBT,GAAkB,CAChD4G,EAAmBE,EAAWrG,SAIlC+E,EAAoBsB,GAIxB9B,EAAa,yBAA0B6B,EAAU,MAUrD,IAAI7B,GAAe,SAASiC,EAAYlC,EAAamC,GACjD,IAAKlG,EAAMiG,GAAa,CAAE,OAE1BjG,EAAMiG,GAAYE,QAAQ,SAASC,GAC/BA,EAAKnD,KAAKvE,EAAWqF,EAAamC,EAAMrE,KAWhDnD,GAAU2H,SAAW,SAASzD,EAAOZ,GACjC,IAAKY,EAAO,CACRA,EAAQ,GAIZ,IAAKlE,EAAUI,YAAa,CACxB,SAAWT,GAAOiI,eAAiB,kBAAqB1D,KAAU,SAAU,CACxE,MAAOvE,GAAOiI,aAAa1D,GAE/B,MAAOA,GAIXb,EAAaC,EAGb,KAAKT,IAAeD,GAAkBsB,EAAM2C,QAAQ,QAAU,EAAG,CAC7D,MAAO3C,GAIX,GAAIE,GAAOH,EAAcC,EAGzB,KAAKE,EAAM,CACP,MAAOvB,GAAa,KAAO,GAI/B,GAAIwC,EACJ,IAAIwC,EACJ,IAAIC,GAAetD,EAAgBJ,EAGnC,OAASiB,EAAcyC,EAAaR,WAAc,CAG9C,GAAIjC,EAAYlF,WAAa,GAAKkF,IAAgBwC,EAAS,CACvD,SAIJ,GAAIzC,EAAkBC,GAAc,CAChC,SAIJ,GAAIA,EAAYtE,kBAAmBT,GAAkB,CACjD4G,EAAmB7B,EAAYtE,SAInC+E,EAAoBT,EAEpBwC,GAAUxC,EAId,GAAI0C,EACJ,IAAIlF,EAAY,CAEZ,GAAIC,EAAqB,CACrBiF,EAAa3G,EAAuBmD,KAAKH,EAAKpD,cAE9C,OAAOoD,EAAK4D,WAAY,CACpBD,EAAWE,YAAY7D,EAAK4D,iBAE7B,CACHD,EAAa3D,EAGjB,GAAIrB,EAAmB,CAMnBgF,EAAa1G,EAAWkD,KAAKlE,EAAkB0H,EAAY,MAG/D,MAAOA,GAGX,MAAOnF,GAAiBwB,EAAKJ,UAAYI,EAAKsB,UAUlD1F,GAAUkI,QAAU,SAASX,EAAYY,GACrC,SAAWA,KAAiB,WAAY,CAAE,OAC1C7G,EAAMiG,GAAcjG,EAAMiG,MAC1BjG,GAAMiG,GAAYa,KAAKD,GAW3BnI,GAAUqI,WAAa,SAASd,GAC5B,GAAIjG,EAAMiG,GAAa,CACnBjG,EAAMiG,GAAYe,OAW1BtI,GAAUuI,YAAc,SAAShB,GAC7B,GAAIjG,EAAMiG,GAAa,CACnBjG,EAAMiG,OAUdvH,GAAUwI,eAAiB,WACvBlH,KAGJ,OAAOtB"}